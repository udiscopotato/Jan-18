Edited from dir2 and branch2.
